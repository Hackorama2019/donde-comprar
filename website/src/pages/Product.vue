<template>
  <Layout>
    <!-- Start dondecomprar_breadcrumb section -->
    <section class="dondecomprar_breadcrumb dondecomprar_breadcrumb_1">
      <svg id="shape_1" width="272px" height="272px">
        <path
          fill-rule="evenodd"
          fill="rgb(255, 255, 255)"
          d="M136.000,-0.000 C211.111,-0.000 272.000,60.889 272.000,136.000 C272.000,211.111 211.111,272.000 136.000,272.000 C60.889,272.000 -0.000,211.111 -0.000,136.000 C-0.000,60.889 60.889,-0.000 136.000,-0.000 Z"
        />
      </svg>
      <svg id="shape_2" width="272px" height="272px">
        <path
          fill-rule="evenodd"
          fill="rgb(255, 255, 255)"
          d="M136.000,-0.000 C211.111,-0.000 272.000,60.889 272.000,136.000 C272.000,211.111 211.111,272.000 136.000,272.000 C60.889,272.000 -0.000,211.111 -0.000,136.000 C-0.000,60.889 60.889,-0.000 136.000,-0.000 Z"
        />
      </svg>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-lg-4">
            <div class="breadcrumb_content text-center">
              <h2>Tus Resultados</h2>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- End dondecomprar_breadcrumb section -->

    <!-- Start dondecomprar_listing_list section -->
    <section
      class="dondecomprar_listing_list dondecomprar_listing_list_2 section_padding wow fadeInUp"
    >
      <div class="container">
        <div class="row">
          <div class="col-lg-4">
            <!-- Start Sidebar Izquierda -->
            <div class="dondecomprar_sidebar listing_page_sidebar">
              <!-- Start Categorias -->
              <div class="widget_box categories_box">
                <div class="wb_title">
                  <h5>Categorias</h5>
                </div>
                <ul class="wb_link">
                  <li>
                    <a href="#">
                      Categoria 1
                      <span>(27)</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      Categoria 2
                      <span>(15)</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      Categoria 3
                      <span>(60)</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      Categoria 4
                      <span>(145)</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      Categoria 5
                      <span>(5)</span>
                    </a>
                  </li>
                </ul>
              </div>
              <!-- End Categorias -->

              <!-- Start Caracteristicas -->
              <div class="widget_box features_box">
                <div class="wb_title">
                  <h5>Caracteristicas</h5>
                </div>
                <div class="wb_check_list">
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check1" name="check1" />
                    <label class="single_input_label sigle_input_check" for="check1"></label>
                    <span>Oferta</span>
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check2" name="check1" />
                    <label class="single_input_label sigle_input_check" for="check2"></label>
                    <span>Nuevo</span>
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check3" name="check1" />
                    <label class="single_input_label sigle_input_check" for="check3"></label>
                    <span>Novedad</span>
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check5" name="check1" />
                    <label class="single_input_label sigle_input_check" for="check5"></label>
                    <span>Paquete</span>
                  </div>
                </div>
              </div>
              <!-- End Caracteristicas -->

              <!-- Start Ratings -->
              <div class="widget_box rateing_box">
                <div class="wb_title">
                  <h5>Ordenar por Clasificacion</h5>
                </div>
                <div class="wb_check_list">
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check6" name="check6" />
                    <label class="single_input_label sigle_input_check" for="check6"></label>
                    <img src="assets/images/rateing_1.png" alt />
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check7" name="check7" />
                    <label class="single_input_label sigle_input_check" for="check7"></label>
                    <img src="assets/images/rateing_2.png" alt />
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check8" name="check8" />
                    <label class="single_input_label sigle_input_check" for="check8"></label>
                    <img src="assets/images/rateing_3.png" alt />
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check9" name="check9" />
                    <label class="single_input_label sigle_input_check" for="check9"></label>
                    <img src="assets/images/rateing_4.png" alt />
                  </div>
                  <div class="single_checkbox">
                    <input type="checkbox" class="single_input" id="check10" name="check10" />
                    <label class="single_input_label sigle_input_check" for="check10"></label>
                    <img src="assets/images/rateing_5.png" alt />
                  </div>
                </div>
              </div>
              <!-- End Ratings -->

              <!-- Start Ratings Recientes -->
              <div class="widget_box news_box">
                <div class="wb_title">
                  <h5>Listado Reciente</h5>
                </div>
                <div class="wb_news_list">
                  <div class="single_wb_news">
                    <div class="news_thumb">
                      <img src="assets/images/thumb_1.jpg" alt />
                    </div>
                    <div class="news_info">
                      <h2>
                        <a href="#">Computadora ASUS 2019 ultima generación i9 core</a>
                      </h2>
                      <p>23 May 2019</p>
                    </div>
                  </div>
                  <div class="single_wb_news">
                    <div class="news_thumb">
                      <img src="assets/images/thumb_1.jpg" alt />
                    </div>
                    <div class="news_info">
                      <h2>
                        <a href="#">Computadora ASUS 2019 ultima generación i9 core.</a>
                      </h2>
                      <p>23 May 2019</p>
                    </div>
                  </div>
                  <div class="single_wb_news">
                    <div class="news_thumb">
                      <img src="assets/images/thumb_1.jpg" alt />
                    </div>
                    <div class="news_info">
                      <h2>
                        <a href="#">Computadora ASUS 2019 ultima generación i9 core.</a>
                      </h2>
                      <p>23 May 2019</p>
                    </div>
                  </div>
                </div>
              </div>
              <!-- End Ratings Recientes -->
            </div>
            <!-- End Sidebar Izquierda -->
          </div>

          <div class="col-lg-8">
            <!-- Start Listado de Productos -->
            <div class="dondecomprar_listing_main">
              <template v-for="(product, key) in products">
                <Product :key="key" :product="product"></Product>
              </template>
            </div>
            <!-- End Listado de Productos -->
          </div>
        </div>
      </div>
    </section>
  </Layout>
</template>

<static-query>
query getAllProducts {
  allProduct {
    edges {
      node {
        id
        slug
        name
        content
        model
        images
        price {
          url
          price
          discountPrice
        }
        category {
          name
          path
        }
        brand {
          name
          path
        }
      }
    }
  }
}
</static-query>

<script>
import Product from '~/components/Product'

export default {
  components: {
    Product
  },
  computed: {
    products () {
      return this.$static.allProduct.edges.map(({ node }) => {
        node.price.sort((a, b) => a.discountPrice - b.discountPrice)
        return node
      })
    }
  },
  methods: {
    getBestPrice ({ price: [{ discountPrice, price }] }) {
      return { price, discountPrice }
    }
  },
  mounted () {
    console.log(this.products)
  }
}
</script>

<style lang="css" scoped>
.card-product:after {
  content: '';
  display: table;
  clear: both;
  visibility: hidden;
}
.card-product .price-new,
.card-product .price {
  margin-right: 5px;
}
.card-product .price-old {
  color: #999;
}
.card-product .img-wrap {
  border-radius: 3px 3px 0 0;
  overflow: hidden;
  position: relative;
  height: 220px;
  text-align: center;
}
.card-product .img-wrap img {
  max-height: 100%;
  max-width: 100%;
  object-fit: cover;
}

.card-product .info-wrap {
  overflow: hidden;
  padding: 15px;
  border-top: 1px solid #eee;
}
.card-product .action-wrap {
  padding-top: 4px;
  margin-top: 4px;
}
.card-product .bottom-wrap {
  padding: 15px;
  border-top: 1px solid #eee;
}
.card-product .title {
  margin-top: 0;
}
</style>
